<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>3d切换</title>
</head>
<style id="css">
ul {margin: 0; padding: 0;}
ul li {list-style: none;}
.wrap {width: 520px; margin: 60px auto;}
#picList {width: 520px; height: 280px; -webkit-perspective: 800px;}
#picList li {width: 50px; height: 280px; position: relative; -webkit-transform-style: preserve-3d; -webkit-transform-origin: center center -140px; -webkit-transform: rotateX(0deg); float: left; transition: 0.5s;}
#picList li a {width: 100%; height: 100%; position: absolute; left: 0px; top: 0px;}
#picList li a:nth-of-type(1) {background-image: url(jpg/1.jpg); background-repeat: no-repeat;}
#picList li a:nth-of-type(2) {background-image: url(jpg/2.jpg); background-repeat: no-repeat; top: -280px; -webkit-transform-origin: bottom; -webkit-transform: rotateX(90deg);}
#picList li a:nth-of-type(3) {background-image: url(jpg/3.jpg); background-repeat: no-repeat; -webkit-transform: translateZ(-280px) rotateX(180deg);}
#picList li a:nth-of-type(4) {background-image: url(jpg/4.jpg); background-repeat: no-repeat; top: 280px; -webkit-transform-origin: top; -webkit-transform: rotateX(-90deg);}
#picList span {position: absolute; width: 280px; height: 280px; background: #ccc; }
#picList span:nth-of-type(1) {-webkit-transform-origin: left; -webkit-transform: rotateY(90deg); left: 0;}
#picList span:nth-of-type(2) {-webkit-transform-origin: right; -webkit-transform: rotateY(-90deg); right: 0;}
#btn {float: right;}
#btn li {width: 30px; height: 30px; font-size: 20px; line-height: 30px; text-align: center; border-radius: 50%; background-color: #000; color: #fff; margin: 5px 5px; float: left;}
#btn li:hover {cursor: pointer;}
#btn .active {background: orange;}

</style>

<body>
	<div class="wrap">
		<ul id="picList">
			<!-- js生成li -->
		</ul>
		<div id="btn">
			<ul>
				<li class="active">1</li>
				<li>2</li>
				<li>3</li>
				<li>4</li>
			</ul>
		</div>
	</div>
</body>
<script>
window.onload = function () {
	var oPic = document.getElementById('picList');
	var oCss = document.getElementById('css');
	var aBtns = document.getElementById('btn').getElementsByTagName('li');
	var iLiWidth = 26;
	var sLiContent = '';
	var sCss = '';
	var iLen = oPic.clientWidth/iLiWidth;
	var iZIndex = 10;
	var aLi = '';
	var iActPos = 0;

	for (var i=0; i<iLen; i++) {
		i>iLen/2?--iZIndex:++iZIndex;
		sLiContent += '<li><a href=""></a><a href=""></a><a href=""></a><a href=""></a><span></span><span></span></li>';
		sCss += '#picList li:nth-of-type(' + (i+1) + ') a {background-position: -' + i*iLiWidth + 'px 0px;}';
		sCss += '#picList li:nth-of-type(' + (i+1) + ') {z-index:' + iZIndex + '}';
	}
	oPic.innerHTML += sLiContent;
	oCss.innerHTML += sCss;

	aLi = oPic.children;

	for (var i=0; i<aLi.length; i++) {
		aLi[i].style.width = iLiWidth + 'px';
	}

	for(var i=0; i<aBtns.length; i++) {
		/*aBtns[i].index = i;
		aBtns[i].onclick = function () {
			aBtns[iActPos].className = '';
			aBtns[this.index].className = 'active';
			iActPos = this.index;
			for (var i=0; i<aLi.length; i++) {
				aLi[i].style.WebkitTransform = 'rotateX(-' + this.index*90 + 'deg)';
			}
		}*/
		(function(a){
			aBtns[a].onclick = function(){
				aBtns[iActPos].className = '';
				this.className = 'active';
				iActPos = a;
				for(var i=0; i<aLi.length; i++){
					aLi[i].style.WebkitTransition = '0.5s ' + i*30 + 'ms';
					aLi[i].style.WebkitTransform = 'rotateX(-' + a*90 + 'deg)';
				}
			};
		})(i)
	}
} 
</script>
</html>